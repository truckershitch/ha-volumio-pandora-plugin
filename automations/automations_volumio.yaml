### VOLUMIO ###

- id: input_select_set_options_hornet_station
  alias: Load Hornet stations
  trigger:
  - platform: homeassistant
    event: start
  - platform: mqtt
    topic: volumio/pandora/stationData
  action:
  - service: pyscript.update_options
    data:
      entity_id: input_select.hornet_station
      retain_state: hell yes
      options_csv: "{% if trigger.payload != Undefined %}None, {{ (trigger.payload | from_json) | map(attribute='name') | join(', ') }}{% else %}None{% endif %}"
  # - service: google_assistant.request_sync
  #   data_template:
  #     agent_user_id: !secret agent_user_id

- id: input_select_select_option_hornet_station
  alias: Update Hornet station in HA when station changes
  trigger:
    platform: mqtt
    topic: volumio/pandora/stationName
  action:
  - service: input_select.select_option
    entity_id: input_select.hornet_station
    data:
      option: "{{ trigger.payload | from_json }}"

- id: play_hornet_station_on_volumio
  alias: Play Hornet station on Volumio
  trigger:
    platform: state
    entity_id: input_select.hornet_station
  condition: "{{ trigger.to_state.state != 'None' }}"
  action:
  - service: script.turn_on
    entity_id: script.play_hornet_station