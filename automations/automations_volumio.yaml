### VOLUMIO ###

- id: set_options_input_select_hornet_station
  alias: Load Hornet stations
  trigger:
  - platform: homeassistant
    event: start
  - platform: mqtt
    topic: volumio/pandora/stationData
  action:
  - service: pyscript.update_options
    data:
      entity_id: input_select.hornet_station
      retain_state: hell yes
      options_csv: >-
        {% if trigger.payload_json != Undefined %}
          {{ 'None, ' }}
          {% for staId in trigger.payload_json %}
            {{ trigger.payload_json[staId]['name'] }}
            {% if not loop.last %}
              {{ ', ' }}
            {% endif %}
          {% endfor %}
        {% else %}
          None
        {% endif %}
  # - service: google_assistant.request_sync
  #   data_template:
  #     agent_user_id: !secret agent_user_id

- id: select_option_input_select_hornet_station
  alias: Update Hornet station in HA when station changes
  trigger:
    platform: mqtt
    topic: volumio/pandora/stationName
  action:
  - service: input_select.select_option
    entity_id: input_select.hornet_station
    data:
      option: "{{ trigger.payload_json }}" # will take another look at this

- id: play_hornet_station_on_volumio
  alias: Play Hornet station on Volumio
  trigger:
    platform: state
    entity_id: input_select.hornet_station
  condition: "{{ trigger.to_state.state != 'None' }}"
  action:
  - service: script.turn_on
    entity_id: script.play_hornet_station
    